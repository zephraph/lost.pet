---
import Layout from '../layouts/Layout.astro';
import Icon from '../components/Icon.astro';
import LocationMap from '../components/LocationMap.tsx';

// Get today's date in YYYY-MM-DD format
const today = new Date().toISOString().split('T')[0];
---

<Layout title="Report Lost Pet">
    <main>
        <div class="mt-12 flex flex-col items-center">
            <a href="/">
              <Icon size={100}/>
            </a>
            <h1 class="text-2xl font-bold mt-6 mb-8">Report a Lost Pet</h1>
            <form class="w-full max-w-md">
                <div class="mb-4">
                    <label for="petName" class="block mb-2">Pet's Name</label>
                    <input type="text" id="petName" name="petName" class="input input-bordered w-full" required>
                </div>
                <div class="mb-4">
                    <label class="block mb-2">Is your pet chipped?</label>
                    <div class="flex items-center space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="isChipped" value="yes" class="radio radio-primary mr-2" required>
                            Yes
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="isChipped" value="no" class="radio radio-primary mr-2" required>
                            No
                        </label>
                    </div>
                </div>
                <div class="mb-4">
                    <label for="petType" class="block mb-2">Pet Type</label>
                    <select id="petType" name="petType" class="select select-bordered w-full" required>
                        <option value="">Select pet type</option>
                        <option value="dog">Dog</option>
                        <option value="cat">Cat</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="lastSeen" class="block mb-2">Last Seen Date</label>
                    <input type="date" id="lastSeen" name="lastSeen" class="input input-bordered w-full" required value={today}>
                </div>
                <div class="mb-4">
                    <label for="lastSeenLocation" class="block mb-2">Last Seen Location</label>
                    <input type="text" id="lastSeenLocation" name="lastSeenLocation" class="input input-bordered w-full mb-2" placeholder="Enter a rough location (e.g., 'corner of Classon and Washington')" required>
                    <div id="map" class="w-full h-64 bg-gray-200 rounded-lg">
                        <LocationMap client:only="react" for="lastSeenLocation" defaultLocation={{ lat: 40.7128, lng: -74.006 }} />
                    </div>
                </div>
                <div class="mb-4">
                    <label for="description" class="block mb-2">Description</label>
                    <textarea id="description" name="description" rows="4" class="textarea textarea-bordered w-full" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-full">Submit Report</button>
            </form>
        </div>
    </main>
</Layout>

<style>
    main {
        margin: 0 auto;
        padding: 1rem;
        width: 800px;
        max-width: calc(100% - 2rem);
        background: white;
        font-size: 16px;
        line-height: 1.6;
    }
</style>