---
import Layout from '../layouts/Layout.astro';
import Icon from '../components/Icon.astro';
import LocationMap from '../components/LocationMap.tsx';

// In a real implementation, you'd fetch the pet data based on the ID
// For now, we'll use mock data
const petData = {
  id: '123',
  name: 'Buddy',
  type: 'dog',
  isChipped: true,
  lastSeen: '2023-12-31',
  lastSeenLocation: 'corner of Classon and Washington',
  description: 'Friendly golden retriever with a red collar.',
  imageUrl: '/images/buddy.jpg', // Placeholder image path
};

const { id } = Astro.params;

// Capitalize the first letter of the pet type
const capitalizedType = petData.type.charAt(0).toUpperCase() + petData.type.slice(1);

// Create a dynamic title
const pageTitle = `Lost ${capitalizedType} ${petData.name}`;
---

<Layout title={pageTitle}>
  <main>
    <div class="mt-12 flex flex-col items-center">
      <a href="/">
        <Icon size={50}/>
      </a>
      <h1 class="text-3xl font-bold mt-6 mb-8">{pageTitle}</h1>
      
      <div class="w-full max-w-2xl bg-white shadow-lg rounded-lg overflow-hidden">
        <img src={petData.imageUrl} alt={petData.name} class="w-full h-64 object-cover"/>
        <div class="p-6">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="font-semibold">Pet Name:</p>
              <p>{petData.name}</p>
            </div>
            <div>
              <p class="font-semibold">Pet Type:</p>
              <p>{petData.type}</p>
            </div>
            <div>
              <p class="font-semibold">Chipped:</p>
              <p>{petData.isChipped ? 'Yes' : 'No'}</p>
            </div>
            <div>
              <p class="font-semibold">Last Seen:</p>
              <p>{petData.lastSeen}</p>
            </div>
          </div>
          
          <div class="mt-4">
            <p class="font-semibold">Last Seen Location:</p>
            <p>{petData.lastSeenLocation}</p>
            <div class="w-full h-64 bg-gray-200 rounded-lg mt-2">
              <LocationMap client:only="react" for="lastSeenLocation" defaultLocation={{ lat: 40.7128, lng: -74.006 }} />
            </div>
          </div>
          
          <div class="mt-4">
            <p class="font-semibold">Description:</p>
            <p>{petData.description}</p>
          </div>
        </div>
      </div>
      
      <a href="/" class="btn btn-primary mt-8">Back to Home</a>
    </div>
  </main>
</Layout>

<style>
  main {
    margin: 0 auto;
    padding: 1rem;
    width: 800px;
    max-width: calc(100% - 2rem);
    background: white;
    font-size: 16px;
    line-height: 1.6;
  }
</style>
